---
title: Lec5 实际操作
createTime: 2025/10/04 22:58:35
permalink: /LearningRoute/0bnn0nmf/
---
## 1. 介绍：

通过前面的学习相信你已经了解到了在java中实现与数据库的交互，那么在开发过程中我们会使用orm框架来简化我们的开发，下面需要使用

Springboot

Mybatis | MybatisPlus（更快？）

mysql

Satoken | SpringSecurity



## 任务是以下几个接口要求

| 业务 | 接口            |
| -- | ------------- |
| 用户 | 登录、注册、修改信息、注销 |
| 商品 | 增删改查          |
| 订单 | 增删改查          |

### 用户模块

> tip：你需要进行用户角色的划分：admin，user

1. **用户注册与登录**

   * **接口**：用户通过用户名和密码进行注册。注册成功后，使用安全框架（Satoken 或 SpringSecurity）进行身份验证登录，登录成功返回 token。

   * **业务逻辑**：注册时检查用户名是否已存在，对密码进行加密存储。登录时验证用户名和密码的正确性。

2. **用户信息修改**

   * **接口**：支持用户修改个人信息，如昵称、联系方式等。

   * **业务逻辑**：修改信息时，需验证用户身份，确保是本人操作。

3. **用户删除**

   * **接口**：用户可以主动删除自己的账号。

   * **业务逻辑**：删除用户账号时，要同时删除该用户相关的订单等关联数据，保证数据的一致性。



### 商品模块

* **商品添加**

  * **接口**：管理员可以添加新的商品信息，包括商品名称、价格、描述等。

  * **业务逻辑**：添加商品时，检查商品信息的完整性和合法性。

* **商品列表查询**

  * **接口**：用户可以查看商品列表，可根据商品名称进行模糊查询。

  * **业务逻辑**：根据用户输入的查询条件，从数据库中筛选出符合条件的商品信息并返回。

* **商品信息修改**

  * **接口**：管理员可以修改商品的信息，如价格、描述等。

  * **业务逻辑**：修改商品信息时，要确保商品存在，且修改后的信息合法。

* **商品删除**

  * **接口**：管理员可以删除商品。

  * **业务逻辑**：删除商品时，要检查该商品是否有未完成的订单关联，若有则不允许删除。



### 订单模块

* **订单创建**

  * **接口**：用户可以选择商品并创建订单，订单包含商品信息、数量、总价等。

  * **业务逻辑**：创建订单时，检查商品库存是否充足，若充足则扣除相应库存，生成订单记录。

* **订单列表查询**

  * **接口**：用户可以查看自己的订单列表，可根据订单状态（待支付、已支付、已完成等）进行筛选。

  * **业务逻辑**：根据用户的查询条件，从数据库中查询符合条件的订单信息并返回。

* **订单状态修改**

  * **接口**：管理员可以修改订单的状态，如从待支付改为已支付等。

  * **业务逻辑**：修改订单状态时，要根据不同的状态转换进行相应的业务处理，如已支付时更新库存等。

* **订单删除**

  * **接口**：用户可以删除已完成的订单。

  * **业务逻辑**：删除订单时，确保订单状态为已完成，删除后释放相应的关联资源。&#x20;





### 一、用户模块



#### 1. 用户注册

* **接口地址**：`/api/user/register`

* **请求方式**：`POST`

* **请求参数（JSON 格式）**

```json
{
    "username": "testuser",
    "password": "123456"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "注册成功",
    "data": {
        "id": 1,
        "username": "testuser",
        "token": "xxxxxxxxxxxxxx"
    }
}
```



#### 2. 用户登录

* **接口地址**：`/api/user/login`

* **请求方式**：`POST`

* **请求参数（JSON 格式）**

```json
{
    "username": "testuser",
    "password": "123456"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "登录成功",
    "data": {
        "id": 1,
        "username": "testuser",
        "token": "xxxxxxxxxxxxxx"
    }
}
```



#### 3. 用户信息修改

* **接口地址**：`/api/user/updateInfo`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述            |
| ------------- | ------ | ---- | ------------- |
| Authorization | String | 是    | 用户登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "id": 1,
    "nickname": "newNickname",
    "contact": "13800138000"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "信息修改成功",
    "data": null
}
```



#### 4. 用户删除

* **接口地址**：`/api/user/delete`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述            |
| ------------- | ------ | ---- | ------------- |
| Authorization | String | 是    | 用户登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "id": 1
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "用户删除成功",
    "data": null
}
```





### 二、商品模块



#### 1. 商品添加

* **接口地址**：`/api/product/add`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述             |
| ------------- | ------ | ---- | -------------- |
| Authorization | String | 是    | 管理员登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "name": "iPhone 15",
    "price": 7999.00,
    "description": "最新款 iPhone"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "商品添加成功",
    "data": {
        "id": 1,
        "name": "iPhone 15",
        "price": 7999.00,
        "description": "最新款 iPhone"
    }
}
```



#### 2. 商品列表查询

* **接口地址**：`/api/product/list`

* **请求方式**：`GET`

* **请求参数（JSON 格式，放在请求体中）**

```json
{
    "keyword": "iPhone"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "查询成功",
    "data": [
        {
            "id": 1,
            "name": "iPhone 15",
            "price": 7999.00,
            "description": "最新款 iPhone"
        }
    ]
}
```



#### 3. 商品信息修改

* **接口地址**：`/api/product/update`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述             |
| ------------- | ------ | ---- | -------------- |
| Authorization | String | 是    | 管理员登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "id": 1,
    "name": "iPhone 15 Pro",
    "price": 9999.00,
    "description": "高端款 iPhone"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "商品信息修改成功",
    "data": {
        "id": 1,
        "name": "iPhone 15 Pro",
        "price": 9999.00,
        "description": "高端款 iPhone"
    }
}
```



#### 4. 商品删除

* **接口地址**：`/api/product/delete`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述             |
| ------------- | ------ | ---- | -------------- |
| Authorization | String | 是    | 管理员登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "id": 1
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "商品删除成功",
    "data": null
}
```





### 三、订单模块



#### 1. 订单创建

* **接口地址**：`/api/order/create`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述            |
| ------------- | ------ | ---- | ------------- |
| Authorization | String | 是    | 用户登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "userId": 1,
    "productId": 1,
    "quantity": 1
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "订单创建成功",
    "data": {
        "id": 1,
        "userId": 1,
        "productId": 1,
        "quantity": 1,
        "totalPrice": 7999.00,
        "status": "待支付"
    }
}
```



#### 2. 订单列表查询

* **接口地址**：`/api/order/list`

* **请求方式**：`GET`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述            |
| ------------- | ------ | ---- | ------------- |
| Authorization | String | 是    | 用户登录返回的 token |

* **请求参数（JSON 格式，放在请求体中）**

```json
{
    "status": "待支付"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "查询成功",
    "data": [
        {
            "id": 1,
            "userId": 1,
            "productId": 1,
            "quantity": 1,
            "totalPrice": 7999.00,
            "status": "待支付"
        }
    ]
}
```



#### 3. 订单状态修改

* **接口地址**：`/api/order/updateStatus`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述             |
| ------------- | ------ | ---- | -------------- |
| Authorization | String | 是    | 管理员登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "id": 1,
    "status": "已支付"
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "订单状态修改成功",
    "data": {
        "id": 1,
        "userId": 1,
        "productId": 1,
        "quantity": 1,
        "totalPrice": 7999.00,
        "status": "已支付"
    }
}
```



#### 4. 订单删除

* **接口地址**：`/api/order/delete`

* **请求方式**：`POST`

* **请求头**

| 参数名           | 类型     | 是否必填 | 描述            |
| ------------- | ------ | ---- | ------------- |
| Authorization | String | 是    | 用户登录返回的 token |

* **请求参数（JSON 格式）**

```json
{
    "id": 1
}
```

* **响应参数（JSON 格式）**

```json
{
    "code": 200,
    "message": "订单删除成功",
    "data": null
}
```

## 贡献者

<div class="contributors-list" style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 20px;">
  <!-- 贡献者 1 -->    
    <div style="text-align: center;">
    <img src="https://avatars.githubusercontent.com/u/119308964?v=4" alt="严文骏" style="width: 80px; border-radius: 50%;" />
    <p style="margin-top: 8px;"><a href="https://github.com/StepthenJun" target="_blank">严文骏</a></p>
  </div>
</div>

