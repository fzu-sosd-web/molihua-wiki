---
title: 前端打包后本地部署
createTime: 2025/10/04 18:35:07
permalink: /LearningRoute/Nginx/
---

# 使用Nginx部署Vue项目及常见问题

## 一、Nginx 介绍
### 1. 什么是Nginx？
Nginx 是一款高性能的 Web 服务器与反向代理服务，核心特点如下：
- 资源占用低：运行时占用内存少，对服务器硬件资源消耗低。
- 并发能力强：在同类型网页服务器中，并发处理能力表现突出。
- 行业应用广：中国大陆众多知名网站均采用 Nginx，包括百度、京东、新浪、网易、腾讯、淘宝等。

### 2. Nginx 的作用
Nginx 主要核心功能包括：
- 负载均衡：分发请求到多个后端服务器，提升系统整体处理能力。
- 静态服务器：高效托管静态资源（如 HTML、CSS、JS、图片等）。
- 正反向代理：正向代理（代理客户端访问外部资源）、反向代理（代理后端服务，隐藏真实服务器地址）。

### 3. Nginx 下载
官方下载地址：[http://nginx.org/en/download.html](http://nginx.org/en/download.html)  
版本选择说明：
- Mainline 版本：功能全面，包含最新特性，推荐使用。
- Stable version：稳定版，bug 修复更及时，适合对稳定性要求极高的场景。
- Legacy versions：旧版本，仅用于兼容老系统，不推荐新部署使用。

### 4. 验证 Nginx 安装成功
1. 启动 Nginx 后，打开浏览器。
2. 在地址栏输入 `localhost`（Nginx 默认使用 80 端口）。
3. 若能看到 Nginx 欢迎界面，说明安装启动成功。

### 5. Nginx 基础部署（Vue 项目相关）
1. 先对 Vue 项目执行打包命令（如 `npm run build`），生成 `dist` 文件夹。
2. 将 `dist` 文件夹内的所有内容，复制到 Nginx 安装目录下的 `html` 文件夹中。
3. 启动 Nginx 后，访问 `localhost` 即可看到 Vue 项目页面。

### 6. Nginx 基本指令（Windows CMD 环境）
需先在 CMD 中进入 Nginx 安装目录，再执行以下指令：

| 操作目的       | 指令                                  | 说明                                   |
|----------------|---------------------------------------|----------------------------------------|
| 查看版本       | `nginx.exe -V`                        | 显示 Nginx 版本及编译配置信息          |
| 启动 Nginx     | `start nginx`                         | 后台启动 Nginx，无命令行阻塞           |
| 查看 Nginx 进程 | `tasklist /fi "imagename eq nginx.exe"` | 检查 Nginx 是否正在运行                |
| 快速关闭       | `nginx.exe -s stop`                   | 强制终止 Nginx 进程，可能丢失未完成任务 |
| 有序关闭       | `nginx.exe -s quit`                   | 等待所有请求处理完成后，优雅关闭       |
| 强制关闭进程   | `taskkill /f /t /im nginx.exe`        | 彻底杀死所有 Nginx 相关进程           |
| 重启 Nginx     | `nginx.exe -s reload`                 | 重新加载配置文件，无需重启进程         |
| 检测 80 端口占用 | `netstat -ano | findstr "80"`        | 查看 80 端口是否被其他程序占用         |

**静态资源存放说明**：Vue 项目的 `static` 文件夹资源，需放在 Nginx 配置的 `location /` 对应的目录下（默认是 `html` 文件夹），确保资源能被正确访问。

### 7. Nginx 高阶使用
若需在 Nginx 中配置多个 Server（多站点/多服务），可参考教程：[http://bugshouji.com/bbs-read-run?tid=1241](http://bugshouji.com/bbs-read-run?tid=1241)


## 二、Vue 项目部署流程（超详细步骤）
完整部署步骤请参考外部链接：[http://bugshouji.com/bbs-read-run?tid=1523](http://bugshouji.com/bbs-read-run?tid=1523)


## 三、部署常见问题及解决方案
### 1. 问题：Vue 项目使用 History 模式，部署后页面显示空白
**解决方案**：将 Vue 项目打包生成的 `dist` 文件夹内容，完整放到 Nginx 服务器的 `html` 目录下，通过 Nginx 访问（而非直接打开 `dist/index.html`）。

### 2. 问题：Vue 打包成 `dist` 后，原项目中的代理跨域设置失效
**原因**：Vue 开发环境的 `proxy` 配置仅在开发阶段生效，打包后需通过服务器（如 Nginx）配置反向代理实现跨域。  
**解决方案**：修改 Nginx 配置文件（`conf/nginx.conf`），添加以下代码：
```nginx
location /api/ {
    proxy_pass http://172.16.8.9:8888/;  # 后端接口地址，末尾必须加“/”和分号
}
```
**注意事项**：
- `location` 后的 `/api` 需改为 `/api/`（末尾加斜杠）。
- `proxy_pass` 配置的后端地址末尾，必须加“/”，且语句结尾需加“;”。

### 3. 问题：Vue 子组件页面刷新后显示 404
**原因**：History 模式下，刷新页面时浏览器会直接请求 URL 路径，Nginx 未配置对应路由转发，导致 404。  
**解决方案**：修改 Nginx 配置文件的 `location /` 节点，添加 `try_files` 配置：
```nginx
location / {
    root   html;          # Nginx 静态资源根目录（默认是 html 文件夹）
    index  index.html index.htm;  # 默认首页
    try_files $uri $uri/ /index.html;  # 将所有请求转发到 index.html，由 Vue 路由处理
}
```


## 相关标签
- 前端开发：打包、部署、前端
- 服务器：Nginx、Nginx 多服务
- 项目部署：Vue 项目部署、常见问题

## 参考视频链接
[使用nginx部署vue项目及常见问题](https://www.bilibili.com/video/BV1x84y1k7qf/?spm_id_from=333.337.search-card.all.click&vd_source=60947311e5670c01151806f02277b2a7)

## 贡献者

<div class="contributors-list" style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 20px;">
  <!-- 贡献者 1 -->
  <div style="text-align: center;">
    <img src="https://avatars.githubusercontent.com/u/184400136?v=4" alt="李持恒" style="width: 80px; border-radius: 50%;" />
    <p style="margin-top: 8px;"><a href="https://github.com/Preface-lb" target="_blank">李持恒</a></p>
  </div>
</div>